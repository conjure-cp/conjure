language Essence 1.3

find var1: partition (maxNumParts 0, partSize 4) from bool
find var2: int(1, 3)
find var3: set (minSize 0) of int(2, 0)
such that
    together({partition({{partition({4}, {2, 1}, {4, 3, 4}), partition({3, 2, 5}, {0, 3, 4, 2, 4}, {1, 3}, {2, 0, 5})},
                         {partition({2, 5, 3, 4, 1}, {0, 2, 3, 1}, {1, 4, 4, 4}, {0, 2, 2, 1})},
                         {partition({1, 3}, {4}), partition({1, 5, 0, 5, 0}, {0}, {2, 1, 4}),
                          partition({3, 1, 5, 2, 4}, {1, 5}, {5}, {2, 2})}}),
              partition({{partition({5, 5}, {2, 2, 3, 3, 1}),
                          partition({3, 5, 0}, {4, 2, 0, 5, 3}, {4, 5, 5}, {5, 4, 0, 2, 0})},
                         {partition({5, 3, 5, 4, 4}, {1, 1, 0}, {5, 3, 3, 2, 3}, {4}, {5, 3, 5}),
                          partition({1, 3, 0}, {0}), partition({5}, {0, 2, 0, 3, 2}, {1, 2, 3, 5, 1})}},
                        {({} : `set of partition from int`),
                         {partition({1}, {5, 2, 2, 2}),
                          partition({0, 3}, {4, 2, 3, 3, 0}, {4, 1, 1}, {5, 5, 2, 0, 5}, {1, 4})},
                         {partition({1, 3}, {1}, {5, 3})}},
                        {{partition({0}, {3, 5, 1}, {1}, {2})}, ({} : `set of partition from int`),
                         {partition({1, 5, 5, 4}, {0, 5, 0, 3, 0}, {0, 3, 1}), partition({5, 5, 2}, {0, 0}),
                          partition({0}, {4, 3, 5, 1}, {1, 2, 3, 1}, {0, 5, 4, 3, 2})},
                         {partition({4, 4, 2, 0, 4}, {0, 2, 3, 0}, {0}, {1, 5, 4}),
                          partition({0, 3}, {3, 4, 2}, {4, 4, 3, 2, 1}, {1, 5, 4}, {5, 5, 1, 1}),
                          partition({4, 3, 3}, {5, 1, 0})}},
                        {{partition({1, 5, 0}, {3, 0, 1}, {5, 0, 0}, {3, 4, 5, 5}, {2, 5, 4, 3}),
                          partition({4}, {5, 0}, {2, 5, 1, 3}, {3, 2, 4}),
                          partition({4, 5, 4}, {5, 1, 3, 4}, {5}, {3}, {5, 0, 2, 1})},
                         {partition({0, 2, 3, 1}, {2, 4, 0, 0}, {0, 2, 2, 2}, {4, 5, 0, 5, 2}, {0, 4}),
                          partition({1, 2, 3, 0}, {0, 3}),
                          partition({2, 5}, {3, 0, 5, 0}, {5, 2, 0}, {4, 0, 5}, {2, 2})},
                         {partition({3, 1, 0}, {0, 1, 1, 0})}})},
             (partition() : `partition from partition from set of partition from int`)),
    (mset() : `mset of partition from mset of matrix indexed by [int] of int`) supset
    mset((partition() : `partition from mset of matrix indexed by [int] of int`)),
    inverse(function(partition({{{1}}}, {({} : `set of set of int`), {{2, 2}}, {{5}, {3, 1}}},
                               {{{0, 0, 2}, {4, 0}, {1}}, {{3, 1}}, {{0, 5}}, {{5, 3}}, {{0, 5}, {4}, {4, 4}}},
                               {{{1, 4, 5}, {4, 1}}, {({} : `set of int`), {2, 2, 0}}, {{1}, {4}, {0}},
                                {{0, 3}, {3, 4}}, {{0, 5, 4}, {3, 2}}},
                               {{{3, 0}}})
                         --> partition({(partition() : `partition from set of int`),
                                        partition({{0, 1, 1}, {1, 0}, {4}, {2}, {1, 0, 2}},
                                                  {{0, 3}, {5}, {4, 1, 2}, {3, 4}, {5, 1}}, {{2}},
                                                  {{4, 0}, {1}, {4}, {4, 2}}),
                                        partition({{0, 0}, ({} : `set of int`), {5, 4, 0}, {3, 4, 5}},
                                                  {{4}, {4}, {1, 1, 5}},
                                                  {{1}, {0}, {4}, ({} : `set of int`), {5, 1, 0}}),
                                        partition({{0, 2, 5}, {0, 2}, {0, 4}, {2, 1, 3}}, {{1, 4}, {5}, {0, 3, 2}},
                                                  {{3, 3}, {2, 4, 5}}, {{4, 0}}, {{5}, {3, 1, 0}}),
                                        partition({{4, 5, 5}})}),
                     partition({{{1, 4, 4}, {2}}, {{4, 3}}}, {{{2, 5, 3}, {1, 0, 2}, {4, 2}}, {{5, 3, 5}}, {{4}}},
                               {{{3}, {0, 0, 5}, {1, 5}}, ({} : `set of set of int`), {{1}},
                                ({} : `set of set of int`)},
                               {{{1}}})
                         --> partition({partition({{3}, {0, 4, 1}, {1, 3}, {4, 4, 0}, {5, 5}}, {{0}, {1, 5}, {5}},
                                                  {{0}}),
                                        partition({{0, 2, 1}, {3}}, {{3, 5}, {4, 2, 0}, {5, 1, 3}, {5, 0}, {1}},
                                                  {{4, 2}, {0, 3, 4}, {2, 5}, {3, 1, 3}},
                                                  {{4, 3}, {3, 0, 3}, {5, 3}, {1}}, {{5}}),
                                        partition({{1}, {1, 1, 3}, {0}}, {{2, 3}, {0}, {5, 4}, {4}, {1, 1}},
                                                  {{3, 1, 5}}),
                                        partition({{4}, {0, 3, 2}, {3}, {5}},
                                                  {{1, 2, 1}, {2, 2, 1}, {3, 4, 4}, {3}, {1, 3}},
                                                  {{4}, {0, 2}, {2, 1, 5}}, {{4}, {2}, {3}}, {{5, 4, 5}}),
                                        partition({{1, 3, 4}, {3}, {3, 5}, {0}}, {{3}, {1, 3}, {5}})}),
                     partition({{{1, 4}, {0, 5, 1}}, {{2}}, {{0, 1}, {2}}}, {{{0, 1}, {0}}},
                               {{{5}}, {{3}, {5}, {4, 2, 1}}, {{3, 4}, {5}, {5}}, {{0, 0, 5}}, {{2, 1, 2}}})
                         --> partition({partition({{3, 0}, {2, 3}, {2, 5}, {4, 2, 0}, {1, 1}}, {{2, 5, 3}}, {{4}, {5}},
                                                  {{0, 0, 4}, {5, 4, 4}, {3, 4, 2}}, {{1, 4, 5}, {2, 1}}),
                                        partition({{5, 1, 3}, {4}}, {{3, 0, 4}, {2, 1}, {1, 3}},
                                                  {{1, 4, 5}, {5}, {2}, {0, 1}}, {{4}}),
                                        partition({{0, 5}, {3, 0, 4}}, {{3}, {0}}, {{1, 2, 5}, {0, 5, 3}},
                                                  {{3, 1, 2}, {0}, {1}, {1}, {4}}, {{4}, {5, 3, 3}, {3, 0}})},
                                       {partition({{5}, {1, 2, 2}, {1, 1, 0}, {3, 3, 5}}, {{3}})},
                                       {partition({{5}, {3}, {3}, {5, 5, 0}, {5}}, {{2, 4}}, {{0, 0, 0}, {0, 5}, {3}},
                                                  {{2, 1, 5}, {4, 0}, {1}}, {{4, 4}, {4}, {3, 3}}),
                                        partition({{2, 2, 2}, {1}, {5, 0, 5}, {0, 0}}, {{3}, {3}})})),
            function(partition({partition({{1, 4, 0}}, {{5, 5}, {2}, {5, 1}, {2}, {0, 5, 5}},
                                          {{1, 5}, {5, 5}, {5}, {2, 2}, {3}}, {{0, 0}, {3}}, {{2}}),
                                partition({{2}, {1}, {1, 3, 1}}, {{0}, {5, 0}, {5, 4, 2}, {5, 2}},
                                          {{1, 3}, {3, 5}, {2, 1}, {0, 0, 0}}, {{0, 1}, {3, 4}, ({} : `set of int`)}),
                                partition({{2}, {2, 5}, {1, 2, 1}})},
                               {partition({{0}, {0}, {3}}, {{4, 0, 0}, {2, 4}, {0, 4, 1}, {0, 4, 2}, {1, 5, 5}},
                                          {{0, 4, 2}}, {{4, 4, 2}, {5, 0}}),
                                partition({{4, 3}, {1, 3}, {2, 3, 3}, {2, 5, 2}, {0, 2, 1}}, {{2}, {3}}),
                                partition({{0, 2}}),
                                partition({{4}, {3}, {3}, {2, 1}, {5}}, {{2, 2}, {3, 4}, {2, 1}, {5, 3}})},
                               {partition({{1, 0, 4}}, {{5}, {2}})},
                               {partition({{5}, {0, 1, 0}}), (partition() : `partition from set of int`),
                                partition({{5, 1}, {0}, {3, 0, 1}, {4, 2, 4}}),
                                partition({{5}, {4}}, {{4}, {1}, {3}, {1}}, {{1}},
                                          {{3, 3, 5}, {0, 1, 4}, {0, 0}, {4}, {3}},
                                          {{2}, {4, 5}, {2, 0, 0}, {4}, {1, 2}})})
                         --> partition({{{5}}, {{0, 1, 0}}, {{5, 4, 5}, {1, 3, 2}}}),
                     partition({partition({{4, 3}, {3, 3, 3}}, {{1}, {2, 2}, {1, 2, 1}}, {{1}, {3}, {2, 2, 3}, {1}},
                                          {{3, 2}}, {{3, 2}, {2, 0}, {5, 0, 2}})},
                               {partition({{3}}, {{2, 5, 5}, {0, 3, 1}}), partition({{2}}, {{2}}, {{5, 2}, {2, 0}}),
                                partition({{3, 5, 4}, {4, 1}, {2, 4, 4}, {3}}, {{4}, {1, 5, 1}, {3, 0}, {4}, {2}},
                                          {{5}, {1, 3, 3}, ({} : `set of int`)}, {({} : `set of int`), {1, 3}},
                                          {{2, 0, 5}, {3, 2, 0}, {4, 1, 5}}),
                                partition({{1, 4}, {2}, {3, 0}}, {{3, 4, 4}, {5, 0}, {3}}, {{0, 3}, {3}},
                                          {{1, 0}, {1}, {2, 1}}),
                                partition({{0}, ({} : `set of int`)}, {{0, 5, 0}}, {({} : `set of int`), {1}, {5, 1}},
                                          {{1}, {2, 3}, {2, 4, 5}, ({} : `set of int`)}, {{3}, {0}})})
                         --> partition({{{4, 5}, {5, 0}}, {{1, 1}}, {{1, 4, 1}, {4, 3}}}),
                     partition({partition({{4, 0, 5}, {1, 4, 0}, {0, 3, 5}, {2, 5, 2}}),
                                partition({{0, 4, 4}, {2, 1, 0}, {1}}, {{3, 1}, {3, 2}, {3}, {1, 5, 0}},
                                          {{4, 2}, {0, 0}, {1, 4}}),
                                partition({{4, 1}, {3, 1, 0}, {4}, {1}, {5, 0}},
                                          {{2, 5, 0}, {1, 1, 5}, {4, 5}, {2, 3}, {4, 5}},
                                          {{5}, {5, 3}, {5, 4, 2}, {0, 3}, {5, 3, 5}},
                                          {{5, 3}, {5, 5}, {2, 3}, {1, 4, 5}}, {{0}, {2, 3}, {2, 5}}),
                                partition({{1}, {3, 1, 1}}), partition({{3}, {3, 1}, {0, 1}})},
                               {partition({{0, 1, 1}}),
                                partition({{5, 4, 1}, {0}, {0, 0}, {5, 5, 1}, {1}}, {{1, 5}}, {{3}, {0, 5, 3}, {5}},
                                          {{3, 1, 1}, {2}, {5, 4, 4}}, {{4, 2}})},
                               {partition({{5, 3}, {3, 5, 5}, {2, 5}, {1}}, {{0, 5}, {5}},
                                          {{3, 0, 5}, {1}, {4}, {4, 2, 5}, {1, 4, 0}}),
                                partition({{0, 3, 1}, {5}, {0, 5, 5}, {1, 1, 1}},
                                          {{3, 4, 5}, {1, 3}, {0, 0, 3}, {0, 5}}, {{4, 1, 2}, {5, 4}, {3}, {1, 5}},
                                          {{2, 2, 3}}, {{2, 0}, {2, 3, 2}, {2}, {0, 1, 5}, {0}}),
                                partition({{1, 0}, {4}, {3, 4}}, {{3, 4}, {1}, {3, 1, 3}}),
                                partition({{1}, {2, 2, 0}, {3, 4}, {1, 5, 1}}, {{0}, {3, 0, 1}, {4}})},
                               {partition({{5}, {5, 1}}, {{1, 1, 3}, {3}, {0, 2}}, {{4, 0, 5}, {4, 4}, {5, 1}, {4}},
                                          {{3}}, {{3}, {4}, {1, 1}, {0, 1}, {2, 3}}),
                                partition({{3, 0, 1}, {1}, {1}, {3, 1, 3}}, {{5}, {5}},
                                          {{5, 5, 2}, {0, 0, 2}, {5}, {0}, {3, 1}},
                                          {{2, 4, 3}, {1, 4, 4}, {2}, {1, 2, 1}}, {{1}, {2, 5}, {1, 3, 3}}),
                                partition({{4}, {4, 5, 2}}, {{2, 0}}, {{3, 3}, {3, 1, 0}, {4, 2, 0}, {5}}, {{3}},
                                          {{3, 1, 5}, {5, 0}}),
                                partition({{3}}, {{4}, {0, 2, 5}, {0}}, {{3}, {3, 0}}),
                                partition({{3, 0}, {1}}, {{5}, {4, 3}}, {{5}, {0}, {3}}, {{0, 3, 5}, {1, 2}, {3, 1}})})
                         --> partition({{{2, 5, 0}, {2, 5, 3}, {3, 4, 0}}, {{1}, {2}}, {{5, 5, 1}, {4}},
                                        {{0}, {2, 3, 1}, {0, 4}}, {{1}, {1}, {0, 3, 4}}},
                                       {{{3, 4, 4}}}),
                     partition({partition({{1, 2, 2}, {1}}),
                                partition({{0, 0}, {2, 4, 1}}, {{5}, {2, 2, 0}, {5, 4}, {2, 4}}, {{3, 3}}),
                                partition({{5, 5}, {5}, {0}, {1, 1, 1}, {0, 5}}, {{0}, {5}, {0, 3}, {2}}),
                                partition({{1}, {2, 4, 1}, {0, 2, 3}, {2}, {5, 5, 0}}),
                                partition({{3, 3}}, {{5}}, {{4}, {2, 3, 4}, {0, 3, 0}, {5}, {4, 0}})},
                               {partition({{5}, {2}, {0, 0, 5}}, {{2}}, {{3}, {0, 5}},
                                          {{3, 3, 1}, {3, 1}, {1, 3}, {4, 4, 4}, {1}},
                                          {{0}, {1}, {2, 3, 0}, {5}, {0, 3}}),
                                partition({{2, 1}, {5}, {4, 5}}, {{5, 4, 4}, {5, 0}, {4}, {3, 2, 1}, {5, 4}}, {{4}},
                                          {{5}, {4}, {4, 2, 3}, {5, 3, 0}, {0, 5}}, {{2}, {5, 4, 3}}),
                                partition({{1}}, {{3}, {5}, {1, 3}, {2}}, {{3, 5}},
                                          {{2, 4}, {5, 4}, {4, 0}, {2, 1}, {1, 5, 2}}),
                                partition({{4}, {3}, {2, 4}, {5, 2, 0}, {1, 4}},
                                          {{4, 4}, {0, 4, 5}, {0}, {1, 3}, {0, 4, 0}}, {{3, 5}, {0, 1, 1}, {3, 2, 4}}),
                                partition({{0, 3, 2}}, {{3, 2}}, {{4}, {1, 1, 0}, {5, 2}, {0, 0, 2}},
                                          {{4}, {5}, {3, 1}, {4}, {3, 3}},
                                          {{1, 3}, {0, 1, 5}, {1, 4, 5}, {3, 1}, {3, 5}})},
                               {partition({{2}, {3, 1, 2}}, {{1}}), partition({{4, 1}}, {{5}, {5, 5, 1}, {2, 5}}),
                                partition({{4, 3}, {0, 2, 3}, {5, 5}}),
                                partition({{5}, {0, 4, 0}, {0, 0, 3}, {1}}, {{0}}, {{0, 1, 5}, {2}},
                                          {{1}, {1, 5, 3}, {0, 0}, {3, 3}, {5, 5}})})
                         --> partition({{{2, 0}, {5, 1, 1}, {0}}, {{3, 2, 5}}, {{2, 3, 4}}},
                                       {{{2, 4}, {5, 3, 0}, {2, 3, 0}}, {{2}}},
                                       {{{2, 4}}, {{0}}, {{5, 4}}, {{3}, {1, 2}, {2, 0}}},
                                       {{{1}, {2}}, {{2, 1, 1}, {4, 2, 4}}, {{2}}, {{1, 3, 0}, {4}}},
                                       {{{4, 1, 5}, {5}, {1, 1}}, {{5, 4}, {0}, {1, 0}}, {{0, 0, 5}, {3, 1}, {0, 1, 4}},
                                        {{4, 5}, {2, 0}, {3, 3, 2}}}))),
    and([l_2 | l_1 : bool, l_2 : bool, l_1, l_2]) <
    or(image(function(mset(0, 1, 5) --> [false, true, true, true; int(0, 10, 9, 11)],
                      (mset() : `mset of int`) --> [true; int(2)]),
             toMSet(var3)))
maximising var2
