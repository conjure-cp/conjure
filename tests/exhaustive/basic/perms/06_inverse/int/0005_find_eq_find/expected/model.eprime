language ESSENCE' 1.0

find p_PermutationAsFunction_PermutationFunction_forwards_Function1D: matrix indexed by [int(1..4)] of int(1..4)
find p_PermutationAsFunction_PermutationFunction_backwards_Function1D: matrix indexed by [int(1..4)] of int(1..4)
find q_PermutationAsFunction_PermutationFunction_forwards_Function1D: matrix indexed by [int(1..4)] of int(1..4)
find q_PermutationAsFunction_PermutationFunction_backwards_Function1D: matrix indexed by [int(1..4)] of int(1..4)
branching on
    [p_PermutationAsFunction_PermutationFunction_forwards_Function1D,
     p_PermutationAsFunction_PermutationFunction_backwards_Function1D,
     q_PermutationAsFunction_PermutationFunction_forwards_Function1D,
     q_PermutationAsFunction_PermutationFunction_backwards_Function1D]
such that
    and([q23 != p_PermutationAsFunction_PermutationFunction_forwards_Function1D[q23] ->
         [p_PermutationAsFunction_PermutationFunction_forwards_Function1D[q23],
          catchUndef(q_PermutationAsFunction_PermutationFunction_forwards_Function1D
                         [p_PermutationAsFunction_PermutationFunction_forwards_Function1D[q23]],
                     0);
              int(1..2)]
             [toInt(or([q21 = p_PermutationAsFunction_PermutationFunction_forwards_Function1D[q23] | q21 : int(1..4)]))
              + 1]
         = q23
             | q23 : int(1..4)]),
    and([q31 != q_PermutationAsFunction_PermutationFunction_forwards_Function1D[q31] ->
         [q_PermutationAsFunction_PermutationFunction_forwards_Function1D[q31],
          catchUndef(p_PermutationAsFunction_PermutationFunction_forwards_Function1D
                         [q_PermutationAsFunction_PermutationFunction_forwards_Function1D[q31]],
                     0);
              int(1..2)]
             [toInt(or([q29 = q_PermutationAsFunction_PermutationFunction_forwards_Function1D[q31] | q29 : int(1..4)]))
              + 1]
         = q31
             | q31 : int(1..4)]),
    allDiff(p_PermutationAsFunction_PermutationFunction_forwards_Function1D),
    and([or([p_PermutationAsFunction_PermutationFunction_forwards_Function1D[q3] = q2 | q3 : int(1..4)])
             | q2 : int(1..4)]),
    allDiff(p_PermutationAsFunction_PermutationFunction_backwards_Function1D),
    and([or([p_PermutationAsFunction_PermutationFunction_backwards_Function1D[q6] = q5 | q6 : int(1..4)])
             | q5 : int(1..4)]),
    and([p_PermutationAsFunction_PermutationFunction_backwards_Function1D
             [p_PermutationAsFunction_PermutationFunction_forwards_Function1D[q1]]
         = q1
             | q1 : int(1..4)]),
    and([p_PermutationAsFunction_PermutationFunction_forwards_Function1D
             [p_PermutationAsFunction_PermutationFunction_backwards_Function1D[q1]]
         = q1
             | q1 : int(1..4)]),
    allDiff(q_PermutationAsFunction_PermutationFunction_forwards_Function1D),
    and([or([q_PermutationAsFunction_PermutationFunction_forwards_Function1D[q10] = q9 | q10 : int(1..4)])
             | q9 : int(1..4)]),
    allDiff(q_PermutationAsFunction_PermutationFunction_backwards_Function1D),
    and([or([q_PermutationAsFunction_PermutationFunction_backwards_Function1D[q13] = q12 | q13 : int(1..4)])
             | q12 : int(1..4)]),
    and([q_PermutationAsFunction_PermutationFunction_backwards_Function1D
             [q_PermutationAsFunction_PermutationFunction_forwards_Function1D[q8]]
         = q8
             | q8 : int(1..4)]),
    and([q_PermutationAsFunction_PermutationFunction_forwards_Function1D
             [q_PermutationAsFunction_PermutationFunction_backwards_Function1D[q8]]
         = q8
             | q8 : int(1..4)])

